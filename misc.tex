%!TEX root = x.tex

\rSec0[core.misc]{杂项}

\rSec1[core.type]{类型}

\pnum
本节包含了若干类型，它们均为语言内建，但并不是单个关键字。

\indexlibrary{\idxcode{Symbol}}
\begin{itemdecl}
type Symbol = __intrinsic;
\end{itemdecl}

\pnum
\tcode{core.Symbol}是所有符号字面量的公共类型。它只能通过内建的符号字面量来获得值。

\rSec1[core.order]{序}

\indexlibrary{\idxcode{Order}}
\begin{itemdecl}
enum Order {
    less,
    equal,
    greater
}
\end{itemdecl}

\pnum
\tcode{core.Order}定义了序关系。它是内建\tcode{cmp}运算符的返回值。自定义类型可以通过实现\tcode{cmp}运算符来支持序关系，参见~\ref{op.over.cmp}。

\pnum
\tcode{.less}代表左操作数小于右操作数。\tcode{.equal}代表左操作数等于右操作数。\tcode{.greater}代表左操作数大于右操作数。

\pnum
\tcode{cmp}也可以返回\tcode{Order?}。如果返回值为\tcode{nil}，则代表两个操作数之间没有序关系。

\rSec1[core.range]{范围}

\indexlibrary{\idxcode{Range}}
\begin{itemdecl}
class Range<T, dyn S: T, dyn E: T>;
\end{itemdecl}

\indexlibrary{\idxcode{ClosedRange}}
\begin{itemdecl}
class ClosedRange<T, dyn S: T, dyn E: T>;
\end{itemdecl}

\pnum
\tcode{core.Range}表示左闭右开区间。它是内建\tcode{..}的结果类型。

\pnum
\tcode{core.ClosedRange}表示闭区间。它是内建\tcode{..=}的结果类型。

\rSec2[core.range.init]{构造器}

\indexlibrary{\idxcode{Range}!\idxcode{init}}
\begin{itemdecl}
func init<T, dyn S: T, dyn E: T>(start: T, end: T) -> Range<T, dyn S, dyn E>;
\end{itemdecl}

\indexlibrary{\idxcode{ClosedRange}!\idxcode{init}}
\begin{itemdecl}
func init<T, dyn S: T, dyn E: T>(start: T, end: T) -> ClosedRange<T, dyn S, dyn E>;
\end{itemdecl}

\pnum
\tcode{Range}和\tcode{ClosedRange}可以使用两个参数\tcode{start}与\tcode{end}构造，分别表示开头与结尾。如果\tcode{start > end}则会抛出\tcode{.InvalidBounds}。

\rSec2[core.range.impl]{实现}

\begin{itemdecl}
impl<T, dyn S, dyn E> Range<T, dyn S, dyn E> : Sequence<T, dyn E - S> {
    type Iterator = RangeIterator<T>;
}
\end{itemdecl}

\begin{itemdecl}
impl<T, dyn S, dyn E> ClosedRange<T, dyn S, dyn E> : Sequence<T, dyn (E - S)+!> {
    type Iterator = ClosedRangeIterator<T>;
}
\end{itemdecl}

\pnum
\tcode{Range}和\tcode{ClosedRange}是序列，其迭代器类型是\tcode{core.RangeIterator}。

\rSec2[core.range.iter]{迭代器}

\indexlibrary{\idxcode{Range}!\idxcode{Iterator}}
\begin{itemdecl}
class RangeIterator<T>;
\end{itemdecl}

\indexlibrary{\idxcode{ClosedRange}!\idxcode{Iterator}}
\begin{itemdecl}
class ClosedRangeIterator<T>;
\end{itemdecl}

\pnum
\tcode{core.RangeIterator}是\tcode{Range}的迭代器类型。

\pnum
\tcode{core.ClosedRangeIterator}是\tcode{ClosedRange}的迭代器类型。