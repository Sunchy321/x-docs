%!TEX root = x.tex

\rSec0[basic]{基本概念}

\pnum
\term{实体}包括对象、函数、类型、模块、运算符、扩展。

\rSec1[scope]{作用域}
\indextext{作用域}

\pnum
\term{作用域}是一段程序文本。当一个名称的完整声明结束后，将这个名称\term{插入}到最小的、它\term{具有}的作用域之中。这意味着，若无特别说明，在这之后到那个作用域结束之前，这个名称可以引用被声明的实体。

\rSec2[scope.stmt]{语句作用域}
\indextext{作用域!语句}

\pnum
每一个语句都是作用域。变量、函数和类型具有语句作用域。

\rSec2[scope.module]{模块作用域}
\indextext{作用域!模块}

\rSec2[scope.type]{类型作用域}
\indextext{作用域!类型}

\rSec2[scope.enum]{枚举作用域}
\indextext{作用域!枚举}

\rSec2[scope.lambda]{Lambda 作用域}
\indextext{作用域!lambda}

\pnum
只有 lambda 参数具有 lambda 作用域。Lambda 作用域是 lambda 表达式（\ref{expr.lambda}）的 \grammarterm{LambdaBody} 部分；或者函数调用运算符（\ref{expr.call}）的 \grammarterm{Block} 部分。

\pnum
Lambda 参数在 lambda 作用域的任意位置都可以使用，但只有在 lambda 没有形参声明的时候才能使用。形如 \texttt{\$$n$} 的 lambda 参数指代该 lambda 的第 $n$ 个未命名形参；形如 \texttt{\$$id$} 的 lambda 参数指代该 lambda 的名称为 $id$ 的命名形参。

\rSec2[scope.sequence]{序列作用域}
\indextext{作用域!序列}

\pnum
只有 \tcode{\$} 具有序列作用域。序列作用域是具有形式 \tcode{r[...]} 或 \tcode{r(...)} 或 \tcode{r.m(...)} 的 \tcode{...} 部分，其中 \tcode{r} 实现了 \tcode{core.Sequence}。

\pnum
在序列作用域中，\tcode{\$} 在任意位置都可以使用并且等价于 \tcode{r.Size}。

\rSec1[name.lookup]{名称查找}
\indextext{名称查找}

\pnum
\term{名称查找}用于解析一个 \grammarterm{IDExpr} 具体指代的实体。
